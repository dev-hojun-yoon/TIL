## 25. 7. 21

* SQL
  * collation: text 계열에서만 사용할 수 있고, 데이터를 정렬할 때 사용
  * 테이블 생성 예시
    ```sql
    USE mywork;
    DROP TABLE IF EXISTS students;
    CREATE TABLE students (
    	student_id VARCHAR(10) PRIMARY KEY, -- UNIQUE + NOT NULL
        name VARCHAR(50) NOT NULL UNIQUE, -- 고유한 값만 받겠음, NULL을 허용 
        grade TINYINT UNSIGNED NOT NULL CHECK (grade BETWEEN 1 AND 3) , -- 1~3학년만 허용
        class_name VARCHAR(10) NOT NULL,
        gender ENUM('M', 'F') NOT NULL,
        age TINYINT CHECK (age >0) DEFAULT 0, -- NULL 대신 0이 DEFAULT 
        addmision_date DATE NOT NULL
    );
    ```
  * SQL의 실행 순서
    1. FROM → 데이터를 가져옴.
    2. WHERE → 행을 필터링.
    3. GROUP BY → 데이터를 그룹화.
    4. HAVING → 그룹을 필터링.
    5. SELECT → 결과를 반환.
    6. ORDER BY → 결과 정렬.
    7. LIMIT → 결과 제한.


* 기타
  * DB 에 이미지를 blob, 바이너리 타입으로 저장하는데, 테이블에 저장하지 않고 또다른 외부 공간에 저장하기 때문에 조회 효율이 떨어짐.
  * MySQL 5.5.3 이전 = utf8 charset 에, utf8_general_ci collation 사용.
  * MySQL 이 최신일 때 = utf8mb4 charset 에, utf8mb4_unicode_ci collation 사용.
  * enum 문자열 자료형에서는 대소문자는 허용해줌.
  * NULL 과 값없음은 다르다.
  * student_id 는 PK 로 보통 BigInt 로 설정 (내부용 식별자) + student_code (비즈니스 로직에서 필요한 실제값)
  * 복합 조건을 할 때 genre == '역사' || '액션' 뒷 부분은 True 이니, 보지 않고 앞 부분에서 끝나버리는 것
  * RLike (REGEXP) 는 정규식으로 검색 '여우.$' # ^ 시작하는 // $ 로 끝나는
  * count(distinct genre)
  * Null 값만 IS 또는 Is Not 으로 값을 비교
