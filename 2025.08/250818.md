# 25. 8. 18 (Mon)

* Vector DB 종류
  * 벡터 DB 는 벡터 자체를 중심으로 설계돼있어 메타데이터는 추가 필드로 붙이는 구조
  * 즉, embedding + metadata 를 명시적으로 묶어 넣어야 함.
  * ElasticSearch 는 문서지향 검색엔진이라 JSON doc 안에 여러 필드를 저장할 수 있고, 그 중 하나가 dense_vector 라 메타데이터 저장소를 따로 두지 않아도 자연스럽게 인덱싱됨.
  * 전용 벡터 DB
    * 벡터 검색 (ANN, Approximate Nearest Neighbor) 위해 만들어진 데이터베이스
      * Pinecone
      * Weaviate
      * Milvus
      * Qdrant
      * Vespa
    * 위 DB는 벡터 인덱싱 (HNSW, IVF, PQ) 최적화 -> 벡터 + 메타데이터 (문서, 태그, JSON) 을 같이 저장하는 기능 제공
  * 범용 DB + 벡터 확장
    * RDBMS, 검색 엔진인데 벡터 기능을 확장한 것
      * ElasticSearch / OpenSearch : dense_vector 필드 제공
      * PostgreSQL : pgvector
      * MongoDB Atlas Vector Search
      * Redis : Redis Vector Similarity 모듈
    * 이런 DB는 벡터와 함께 다른 구조화 데이터 (SQL, 문서, 키/값 등) 같이 저장 가능
* ELK 를 활용한 Vector DB 구축
  * 기존 ML 모델과 Foundation 모델 (대규모 언어모델, LLM 등) 활용의 차이
    * Foundation 모델 기반 구조
      * 입력 데이터: 라벨링/라벨링되지 않은 데이터
      * 처리 과정: Foundation Model 대규모 언어 모델이 데이터를 입력 받음
      * 출력 결과
        * 정보 추출, 문장 생성, 요약, QA, chatbot
      * 즉 하나의 범용 Foundation model 이 다양한 업무를 동시에 처리할 수 있음
    * 기존 ML 모델 기반 구조
      * 라벨링된 데이터, 즉 지도학습용 데이터만 사용
      * Task 별로 각기 다른 ML 모델을 학습해야 함.
      * Task 전용 모델이 별도로 존재해야 하고, 학습/운영 불편함
    * 즉, ELK + vector DB 환경에서 foundation model 을 활용하면 기존 ML 방식보다 데이터 요구사항이 줄어들고, 다목적 활용이 가능
  * 검색 유형
    * rule based / Lexical : 문서와 같은 비정형 데이터 가져와서 특정 단어와 일치여부 검색
    * Semantic Search : 텍스트 임베딩을 기반으로 관련 문서 가져오기
      * 시멘틱 서치는 일관성이 떨어지고, 모델은 확률/통계로 임베딩도 완전히 일치하는 것은 어려워 Rule Based, Semantic Search 를 함께 쓴다.
      * 외부 문서들을 임베딩 모델을 거쳐 벡터화와 메타데이터 (사람이 인식할 수 있는 정보) 구성을 함.
      * 벡터화와 메타데이터를 가지고 인덱싱을 하여 벡터 데이터베이스에 저장하는 것이다.
      * ElasticSearch 에서 dense_vector 자료형은 데이터를 수치 벡터화한 결과를 저장하기 위한 필드 타입이다.
      * ElasticSearch 를 사용하면 메타데이터를 별도로 만들 필요는 없다.
      * vector DB 에 저장된 데이터를 조회할 때 "코사인 유사도" 와 "KNN" 을 주로 사용한다.
        * KNN (k-Nearest Neighbors) : 머신러닝 (기계학습) 에 속함
          * 지도학습 알고리즘
          * Clasification 분류, Regression 회귀 문제에 사용
          * 새로운 데이터가 들어오면 가까운 k 이웃 데이터를 보고 다수결/평균으로 결과를 예측
          * 학습 train 단계에서는 모델 파라미터를 거의 학습하지 않고, 데이터를 그대로 저장
          * cf) 딥러닝 핵심 알고리즘인 신경망
            * 학습 시 가중치 weight 를 업데이트하면서 데이터 패턴을 점진 학습

* 기타
  * https://lmstudio.ai/docs/app/api/endpoints/openai
    * lm studio api 사용법
